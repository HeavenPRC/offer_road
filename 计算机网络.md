### 1.OSI和TCP/IP

​		**OSI** 是标准化组织为了实现设备bai互联而提出du的一个纯理论的框架性的概念。也可就是说:它只能告诉我们一个网络应该具备哪些功能，某个功能的实现是在某个层次，但具体的实现技术他是不进行规范的。因为OSI的网络模型标准比较严格，另外推出的时间也相对较晚，所以目前还没有完全按照OSI模型实现的网络。
​		**TCP/IP**是另一种网络模型。是我们实际应用最广泛的一种网络的模型。在这个模型中，不只是划分了功能层，还有具体的实现技术，即协议。TCP和IP就是这个模型中最重要的两个层次的代表协议。
​		这两个模型之间的可以说是完全独立的。因为OSI是一种理论上的指导。而TCP/IP是一种事实上的标准。
​		但两者也是有一定联系的，两者都是网络模型，都存在某些相同的层次。另外，OSI是一个通用性的指导，它不仅可以解释TCP/IP,还可以解释任何一种类型的网络。而tcp/ip是无法解释其他网络的



### 2.对比关系表

| OSI七层模型 | TCP/IP概念模型 | 功能                                   | TCP/IP协议簇                       |
| ----------- | -------------- | -------------------------------------- | ---------------------------------- |
| 表示层      | 应用层         | 文件传输，电子邮件，文件服务，虚拟终端 | TFTP,HTTP,SNMP,FTP,SMTP,DNS,Telnet |
| 应用层      |                | 数据格式化，代码转换，数据加密         |                                    |
| 会话层      |                | 解除与建立与别的节点的联系             |                                    |
| 传输层      | 传输层         | 提供端对端的连接                       | TCP,UDP                            |
| 网络层      | 网际层         | 为数据包选择路由                       | IP,ICMP,RIP,OSPF,BGP,IGMP          |
| 数据链路层  | 网络接口层     | 传输有地址的帧以及错误检测功能         | SLIP,CSLIP,PPP,ARP,RARP,MTU        |
| 物理层      |                | 以二进制数据形式在物理媒体上传输数据   |                                    |



### 3.UDP

#### 包头

源端口号，目标端口号，UDP长度，UDP校验和，数据

#### 特性

无状态，面向字节流，不保证丢包，顺序传输，网络阻塞

沟通简单，不建立连接可广播发送，无拥塞控制

#### 使用场景

1.使用资源少，网络好，对丢包不敏感的应用 eg:DHCP, TFTP

2.不需要一对一沟通，建立连接，而是可以广播的应用

3.需要处理速度快，时延低，可以容忍少数丢包，抢占宽带

#### 例子

网页或者 APP 的访问 QUIC , 流媒体的协议RTMP， IoT 物联网， 移动通信领域



### 4.TCP协议

TCP是面向连接的

#### TCP包头格式

![642947c94d6682a042ad981bfba39fbf](/Users/zhangjian/Desktop/offer_road/642947c94d6682a042ad981bfba39fbf.jpg	

​		源端口号 16位

​		目的端口号 16位

​		序号 32位  :  解决包发送的乱序

​		确认序号 32位 : 发出的包需要确认是否送达 

#### 建立连接 “三次握手”

![c067fe62f49e8152368c7be9d91adc08](/Users/zhangjian/Desktop/offer_road/c067fe62f49e8152368c7be9d91adc08.jpg)

TCP连接握手，握的是啥？是通信双方数据原点的序列号  Initial sequence number 双方都需要确人对方收到了自己的初始序列号

##### 为什么是“三次握手”，不是两次握手. 

​        1.A SYN -> B

​        2.B SYN+ACK -> A

​		两次握手只能确认A和B就A的初始序号，第二次没有返回就不能确认A和B就B的初始序号，简单来说双方都需要确认对方收到了自己的初始信号

​		防止了客户端失效的连接请求报文段突然又传到服务器，减少了资源的浪费，三次握手是一种能应对网络不稳定情况的最简方案

#### 断开连接 “四次挥手”

