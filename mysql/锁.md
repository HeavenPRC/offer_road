锁是为了并发访问时合理控制资源的访问

锁分为全局锁，表级锁和行锁

## 全局锁

 mysql全局锁就是对整个数据库加一个全局读锁

```
flush tables with read lock
```

加锁之后：数据更新语句，数据定义语句，更新类事务语句会被阻塞

### 使用场景：

全库逻辑备份

```
innodb可以使用mysqldump -single-transcation 导出之前会启动一个一致性事务。由于mvcc的支持过程中数据可以正常更新
```

还有一个全库只读的方法：set global readonly=true

不用这个原因是：

1. readonly的值会被用来做其他逻辑，比如用来判断一个库是不是从库.修改global的影响会更大
2. 异常处理机制上存在差异。如果执行FTWRL后，连接断开，mysql会自动释放锁。如果是global会一直保持这个状态



## 表级锁

## 行级锁

