## 知识补充：

io访问速度：

![avatar](https://static001.geekbang.org/resource/image/ac/9c/ac80f6e1714f3e1e8eabcfd8da3d689c.jpg)

在计算机中存在缓存：

* CPU 里面的末级缓存，即 LLC，用来缓存内存中的数据，避免每次从内存中存取数据；
* 内存中的高速页缓存，即 page cache，用来缓存磁盘中的数据，避免每次从磁盘中存取数据。

![avatar](https://static001.geekbang.org/resource/image/7d/44/7dyycf727f9396eb9788644474855a44.jpg)

**第一个特征**：在一个层次化的系统中，缓存一定是一个快速子系统，数据存在缓存中时，能避免每次从慢速子系统中存取数据。对应到互联网应用来说，Redis 就是快速子系统，而数据库就是慢速子系统了。

**第二个特征**：缓存系统的容量大小总是小于后端慢速系统的，不可能把所有数据都放在缓存系统中.总要有一部分数据要淘汰掉。

### 缓存处理的两种情况

![avatar](https://static001.geekbang.org/resource/image/6b/3d/6b0b489ec0c1c5049c8df84d77fa243d.jpg)

缓存命中：Redis 中有相应数据，就直接读取 Redis，性能非常快。
缓存缺失：Redis 中没有保存相应数据，就从后端数据库中读取数据，性能就会变慢。而且，一旦发生缓存缺失，为了让后续请求能从缓存中读取到数据，我们需要把缺失的数据写入 Redis，这个过程叫作缓存更新。缓存更新操作会涉及到保证缓存和数据库之间的数据一致性问题，

####  旁路缓存

正常的缓存失效操作

#### 只读缓存

正常的缓存逻辑，略

#### 读写缓存

写请求也会在缓存中进行。断电和宕机数据就会丢失。

两种策略

![avatar](https://static001.geekbang.org/resource/image/00/66/009d055bb91d42c28b9316c649f87f66.jpg)