KSE- 内核调度实体

| 用户级线程模型                                        | 内核级线程模型                                               | 两极线程模型                                                 | Goroutime |
| ----------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------- |
| 存储在用户空间中，内核不参与调度                      | 归属于内核，进程对线程的创建中断终止等都需要进行系统调用     | 一个进程可以绑定多个内核调度实体，进程中线程映射绑定在一个已绑定的KSE上 |           |
| 一个线程发生阻塞所属进程也会被阻塞                    | 可以实现真正的线程并发                                       |                                                              |           |
| 所有线程的优先级对内核不生效，只决定于所属进程（1:N） | 线程的操作的管理都需要占用更多的内核性能，所以创建的数量都有直接或间接的限制(1:1) |                                                              |           |

实现数据一致性的方法

1.临界区

只能被串行化访问或执行的某个资源或代码片段

2.互斥量Mutex

已锁定和未锁定，

离开临界区要解锁，

互斥量属于共享资源，初始化要保证唯一性

1.控制临界区的纯度，不要加杂无关代码

2.控制临界区的粒度，不要太细

3.减少临界区的粒度

4.减少临界区中代码的执行耗时

5.避免长时间持有互斥量

6.优先使用原子操作而不是互斥量



